<skuid__page unsavedchangeswarning="yes" personalizationmode="server" showsidebar="false" showheader="false">
	<models>
		<model id="Accounts" limit="20" query="true" createrowifnonefound="false" datasource="salesforce" sobject="Account">
			<fields>
				<field id="Name"/>
				<field id="Description"/>
				<field id="BillingCity"/>
				<field id="BillingState"/>
				<field id="BillingCountry"/>
				<field id="Industry"/>
				<field id="Image__c"/>
				<field id="Image__r.Name"/>
				<field id="Image__r.skuid__AttachmentId__c"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="UIO" limit="20" query="true" datasource="Ui-Only" createrowifnonefound="true">
			<fields>
				<field id="Prompt" displaytype="TEXTAREA" length="1000" ogdisplaytype="TEXT"/>
				<field id="ImageType" displaytype="PICKLIST" length="255" ogdisplaytype="TEXT" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue" defaultValue="Avatar">
					<picklistentries>
						<entry value="Avatar" label="Avatar"/>
						<entry value="Logomark" label="Logomark"/>
						<entry value="Logotype" label="Logotype"/>
						<entry value="Graffiti Script" label="Graffiti Script"/>
						<entry value="Icon" label="Icon"/>
					</picklistentries>
				</field>
				<field id="Style" displaytype="PICKLIST" length="255" ogdisplaytype="TEXT" picklistsource="manual" returntype="TEXT" defaultvaluetype="fieldvalue" defaultValue="Classical">
					<picklistentries>
						<entry value="Classical" label="Classical"/>
						<entry value="Gothic" label="Gothic"/>
						<entry value="Modernist" label="Modernist"/>
						<entry value="Surrealist" label="Surrealist"/>
						<entry value="Impressionist" label="Impressionist"/>
						<entry value="Brutalist" label="Brutalist"/>
						<entry value="Humorous" label="Humorous"/>
					</picklistentries>
				</field>
				<field id="Date" displaytype="TEXT" length="255" ogdisplaytype="TEXT" precision="4" scale="0" defaultvaluetype="fieldvalue" defaultValue="1970"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="ImageRequest" query="false" datasource="OpenAI" payloadcontenttype="JSON" sendchanges="usetemplaterequest" customrequesttemplate="{&#10;  &quot;prompt&quot;: &quot;{{#urlEncode}}{{$Model.UIO.data.0.Prompt}}{{/urlEncode}}&quot;,&#10;  &quot;n&quot;: 4,&#10;  &quot;size&quot;: &quot;256x256&quot;,&#10;  &quot;response_format&quot;: &quot;b64_json&quot;&#10;}" contenttype="application/json" createrowifnonefound="false" verb="POST" endpoint="/images/generations" pathtocontent="data">
			<fields>
				<field id="b64_json" displaytype="TEXT"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="ImageSave_SkuidFile" limit="1" query="false" createrowifnonefound="false" datasource="salesforce" sobject="skuid__Image__c">
			<fields/>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true"/>
			</conditions>
			<actions/>
		</model>
		<model id="ImageSave_Attachment" limit="1" query="false" datasource="salesforce" sobject="Attachment" createrowifnonefound="false">
			<fields>
				<field id="Body"/>
				<field id="Name"/>
				<field id="ParentId"/>
				<field id="Parent.Name"/>
			</fields>
			<conditions/>
			<actions/>
		</model>
		<model id="ImageSave_Account" limit="1" query="false" createrowifnonefound="false" datasource="salesforce" sobject="Account">
			<fields>
				<field id="Id"/>
				<field id="Image__c"/>
				<field id="Image__r.Name"/>
				<field id="Image__r.skuid__AttachmentId__c"/>
				<field id="Name"/>
			</fields>
			<conditions>
				<condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Id" clientorserver="server" state="filterableoff" inactive="true" name="Id"/>
			</conditions>
			<actions/>
		</model>
	</models>
	<components>
		<skuid__grid uniqueid="sk-2pvx-20701" flexDirection="row" justifyContent="flex-start" alignItems="flex-start" columnGutter="4">
			<divisions>
				<division minWidth="300px" ratio="3" alignSelf="auto">
					<components>
						<skuid__list model="Accounts" uniqueid="sk-1owo-25987" pageSize="50" rowActionsOnLeft="false" title="Salesforce Accounts">
							<columns>
								<column fillRatio="1" widthBehavior="fixed">
									<items>
										<item displayType="avatar" size="large" url="https://skuid-demo.file.force.com/servlet/servlet.FileDownload?file={{Image__r.skuid__AttachmentId__c}}" fallbackType="icon" fallback="sk-webicon-ink:company"/>
									</items>
								</column>
								<column fillRatio="2">
									<items>
										<item fieldId="Name" displayType="field" displayStyle="primary"/>
									</items>
								</column>
								<column fillRatio="1">
									<items>
										<item fieldId="BillingCity" displayType="field" displayStyle="secondary"/>
									</items>
								</column>
								<column fillRatio="1">
									<items>
										<item fieldId="BillingState" displayType="field" displayStyle="secondary"/>
									</items>
								</column>
								<column fillRatio="1">
									<items>
										<item fieldId="Industry" displayType="field" displayStyle="secondary"/>
									</items>
								</column>
							</columns>
							<rowActions>
								<action type="multi" label="Add Images">
									<actions>
										<action type="action-sequence" action-sequence-id="ba5cefef-7354-4f9b-aea5-bfd4ef0453ea"/>
									</actions>
									<renderConditions logictype="and"/>
									<enableConditions/>
									<styleVariantConditions/>
								</action>
							</rowActions>
							<massActions/>
							<filtering enableSearch="false"/>
							<sorting enable="false"/>
						</skuid__list>
					</components>
				</division>
				<division alignSelf="auto" minWidth="270px" ratio="1">
					<components/>
				</division>
			</divisions>
			<styles>
				<spacing top="4" right="4" bottom="4" left="4"/>
			</styles>
			<background/>
		</skuid__grid>
	</components>
	<resources>
		<labels/>
		<javascript/>
		<css/>
		<actionsequences>
			<actionsequence id="ba5cefef-7354-4f9b-aea5-bfd4ef0453ea" label="Open_Image_Generation_Modal" type="reusable">
				<actions>
					<action type="showModal">
						<skuid__modal title="Generate Images for Account &quot;{{Name}}&quot;" width="700px" ariaRole="dialog">
							<components>
								<skuid__wizard uniqueid="sk-1p02-63129">
									<steps>
										<step stepId="step1" stepLabel="Image Properties">
											<components>
												<skuid__form showErrorsInline="true" model="UIO" uniqueid="sk-1o---62128" mode="edit">
													<columns>
														<column behavior="flex">
															<sections>
																<section showHeading="false">
																	<fields>
																		<skuid__field id="ImageType" uniqueId="sk-1yDU-72626" showHelp="true" label="Type of Image" required="true">
																			<validations>
																				<requiredValidation type="required" enable="true"/>
																			</validations>
																		</skuid__field>
																		<skuid__field id="Style" uniqueId="sk-1yDU-72644" showHelp="true" label="Artistic Style" required="true">
																			<validations>
																				<requiredValidation type="required" enable="true"/>
																			</validations>
																		</skuid__field>
																		<skuid__field id="Date" uniqueId="sk-1yDU-72662" showHelp="true" label="Year when Image would have been generated" required="true">
																			<validations>
																				<requiredValidation type="required" enable="true"/>
																			</validations>
																		</skuid__field>
																	</fields>
																</section>
															</sections>
														</column>
													</columns>
												</skuid__form>
											</components>
											<buttons>
												<button label="Review Prompt" styleSettingsVariant="primary">
													<actions>
														<action type="updateRow" fieldmodel="UIO" affectedrows="context">
															<updates>
																<update valuesource="formula" field="Prompt" enclosevalueinquotes="true">
																	<formula>JOIN_TEXT("",
"Please generate an \"",
{{$Model.UIO.data.0.ImageType}},
"\" for the company \"",
{{$Model.ImageSave_Account.data.0.Name}},
"\" in the \"",
{{$Model.UIO.data.0.Style}},
"\" style. Imagine this image was created in the year \"",
{{$Model.UIO.data.0.Date}},
"\" ."
)</formula>
																</update>
															</updates>
														</action>
														<action type="navigateNext"/>
													</actions>
												</button>
											</buttons>
										</step>
										<step stepLabel="Review Prompt" stepId="step2">
											<components>
												<skuid__form showErrorsInline="true" model="UIO" uniqueid="sk-1yEF-101460" mode="edit">
													<columns>
														<column>
															<sections>
																<section showHeading="false">
																	<fields>
																		<skuid__field id="Prompt" uniqueId="sk-1yEJ-104676" showHelp="true"/>
																	</fields>
																</section>
															</sections>
														</column>
													</columns>
												</skuid__form>
											</components>
											<buttons>
												<button label="Back">
													<actions>
														<action type="navigatePrevious"/>
													</actions>
												</button>
												<button label="Generate Image" styleSettingsVariant="primary">
													<actions>
														<action type="blockUI" styleSettingsVariant="dark" message="Generating Images" subtext="Please wait"/>
														<action type="save">
															<models>
																<model>UIO</model>
															</models>
														</action>
														<action type="requeryModels" behavior="standard">
															<models>
																<model>ImageRequest</model>
															</models>
														</action>
														<action type="navigateNext"/>
														<action type="unblockUI"/>
													</actions>
												</button>
											</buttons>
										</step>
										<step stepId="step3" stepLabel="Select Images">
											<components>
												<skuid__form showErrorsInline="true" model="UIO" uniqueid="sk-1yMd-82642" mode="readonly">
													<columns>
														<column>
															<sections>
																<section showHeading="false">
																	<fields>
																		<skuid__field id="Prompt" uniqueId="sk-1yMd-82643" showHelp="true"/>
																	</fields>
																</section>
															</sections>
														</column>
													</columns>
													<styles>
														<spacing bottom="3"/>
													</styles>
												</skuid__form>
												<skuid__deck columnGutter=".75em" rowGutter=".75em" model="ImageRequest" showSaveCancel="false" verticalAlign="top" minWidth="270px" uniqueid="sk-1opv-81708" setMaxWidth="auto" pageSize="10" showListFooter="false">
													<components>
														<skuid__text contents="&lt;img src=&quot;data:image/jpeg;base64,{{{b64_json}}}&quot; style=&quot;height: 256px;&quot; /&gt;" uniqueid="sk-1oqV-83923" model="ImageRequest"/>
														<skuid__buttonSet uniqueid="sk-1p19-24764" position="center" model="ImageRequest">
															<groups>
																<skuid__buttonGroup uniqueId="sk-1p19-24762">
																	<buttons>
																		<skuid__button label="Save Image to Account" uniqueId="sk-1p19-24763" styleSettingsVariant="borderlessSlim">
																			<styles>
																				<spacing/>
																			</styles>
																			<actions>
																				<action type="action-sequence" action-sequence-id="0ae79dd7-5177-47e8-9d93-98a197a3727e"/>
																			</actions>
																		</skuid__button>
																	</buttons>
																</skuid__buttonGroup>
															</groups>
														</skuid__buttonSet>
													</components>
													<filtering enableSearch="false"/>
													<sorting enable="false"/>
												</skuid__deck>
											</components>
											<buttons>
												<button label="Back">
													<actions>
														<action type="navigatePrevious"/>
													</actions>
												</button>
											</buttons>
										</step>
									</steps>
								</skuid__wizard>
							</components>
						</skuid__modal>
					</action>
					<action type="updateCondition" model="ImageSave_Account" behavior="set" condition="Id" valuesource="fieldvalue" value="{{Id}}"/>
					<action type="requeryModels" behavior="standard">
						<models>
							<model>ImageSave_Account</model>
						</models>
					</action>
				</actions>
				<description/>
			</actionsequence>
			<actionsequence id="0ae79dd7-5177-47e8-9d93-98a197a3727e" label="Copy Image to SF Attachment and Skuid File">
				<actions>
					<action type="blockUI" styleSettingsVariant="dark" message="Saving Image"/>
					<action type="createRow" model="ImageSave_Attachment" appendorprepend="prepend" defaultmodefornewitems="edit" affectedrows="context">
						<defaults>
							<default valuesource="fieldvalue" field="Body" enclosevalueinquotes="true" value="{{b64_json}}"/>
							<default valuesource="fieldvalue" field="Name" enclosevalueinquotes="true" value="Avatar_{{$Model.ImageSave_Account.data.0.Name}}"/>
						</defaults>
					</action>
					<action type="createRow" model="ImageSave_SkuidFile" appendorprepend="prepend" defaultmodefornewitems="edit" affectedrows="context">
						<defaults/>
					</action>
					<action type="save">
						<models>
							<model>ImageSave_SkuidFile</model>
						</models>
					</action>
					<action type="updateRow" fieldmodel="ImageSave_Attachment" affectedrows="context">
						<updates>
							<update valuesource="fieldvalue" field="ParentId" fieldtargetobjects="Account,Ad_Campaign__c,Announcements__c,Asset,Bank_Account__c,BeerRating__c,Big_Complicated_Object__c,Broker__c,Bundle__c,Campaign,Case,CaseFile__c,Case_Response__c,Case_Upload__c,ChannelProgram,ChannelProgramLevel,Circle__c,Client_Encounter__c,Client__c,College_Application__c,CommSubscription,CommSubscriptionChannelType,Comment__c,Contact,Contact_Address__c,Contact_Circle_Association__c,Contact_Phone__c,Contacts__c,Contract,Contribution__c,Country__c,Custom_Event_Assignment__c,Custom_Event_Test__c,Customer__c,DS_Declaration__c,DS_Financial__c,DS_Loan__c,DS_Mortgage__c,DS_Personal__c,DS_Property__c,DS_Rate__c,DS_Summary__c,Daily_Numbers__c,Dashboard_Fact__c,DelegatedAccount,Demo_Custom_Code_Inventory__c,Demo_Inventory_Entry__c,Demo_Usage__c,Design_Brief__c,Document_Status__c,Dynamics_Certs__c,EF_Category__c,EF_DistribHeader__c,EF_DistribItems__c,EF_Selection__c,EmailAlert__c,EmailMessage,EmailTemplate,Emily_s_Custom_Object__c,Employe_Order_Role__c,Employee__c,Encryption__c,EngagementChannelType,Epic__c,Event,FakeAccountObject__c,FastCall__Call_Score__c,Fitting__c,Form_Instance__c,Fund_Relationship__c,Fund__c,GS_Activity_Guidance_Answer__c,GS_Activity_Guidance_Question__c,GS_Challenger_Input_Answer__c,GS_Challenger_Input__c,GS_Methodology__c,GS_Playbook_Activity_Completion__c,GS_Playbook_Activity__c,GS_Playbook__c,GS_Stage__c,Grant__c,Grantee__c,Holiday__c,Image,KW_Child_1__c,KW_Child_2__c,KW_Child_3__c,KW_Master__c,KW_Testing_Bug__c,Lead,LinkedArticle,Location,MPI_Survey__c,MP_Fleet__c,Marketing_Consent__c,Marketing_Resource__c,Menu_Item__c,Milestone_Subscription__c,Moment__c,NN_Entry__c,NN_Forecast__c,NN_Meeting__c,NN_Section__c,NewCustomerReq__c,OppFilter__c,Opp_Child_Stale__c,Opportunity,Opportunity_Story__c,Order__c,Page_Analytics__c,PartnerFundAllocation,PartnerFundClaim,PartnerFundRequest,PartnerMarketingBudget,Phone_Product__c,Playbook_Activity_Junction__c,Product2,Project_Milestone__c,Project__c,Property__c,QR_Instance__c,QR_Master__c,Quarterly_Forecast__c,Question_Response__c,Question__c,Questionaire__c,Quote,Related_Product__c,Restaurant_Order_Line_Item__c,Restaurant_Order__c,SDOC__SDField__c,SDOC__SDJob__c,SDOC__SDRelationship__c,SDOC__SDTemplate__c,SDOC__SDoc__c,SOAT__c,Sales_Order_Line_Item__c,Sales_Order__c,Scholarship_Request__c,Session_Pause__c,Session__c,Shipment__c,Shopping_Cart_Item__c,Site__c,SkuidSurvey_QuestionOptions__c,SkuidSurvey_Question__c,SkuidSurvey_Response__c,SkuidSurvey_SurveyCompletion__c,SkuidSurvey_Survey__c,SkuidVideo__c,Skuid_POC_Tracking__c,SocialPost,Solution,Sort_Order__c,State__c,Statement__c,Stock_Holding__c,Stock_Offering__c,Stock__c,Survey__c,TSA_Form__c,TapStatus__c,Task,Territory__c,TestCustomObject__c,TestObject__c,Test_Image__c,Test_Object2__c,Time_Card__c,Transaction__c,TransportMethod__c,UniqueEntry__Custom_Field_Mapping__c,UniqueEntry__Scanned_Field_Config__c,UniqueEntry__Scanned_Field__c,User_Story__c,Utility_Case__c,WorkOrder,WorkOrderLineItem,Workout__c,jSignatureTest__c,reas_events__c,skuidReportsStorage__c,skuid__Auth_Provider_Credential__c,skuid__Feedback_Response__c,skuid__Feedback__c,skuid__Image__c,skuid__Page_Assignment__c,skuid__Page_Interaction__c,skuid__Page_Version__c,skuid__Page__c,skuid__Personalization_Settings__c,skuidext__SPICED__c,z_Milestone__c,z_Project__c" enclosevalueinquotes="true" value="{{$Model.ImageSave_SkuidFile.data.0.Id}}"/>
						</updates>
					</action>
					<action type="save">
						<models>
							<model>ImageSave_Attachment</model>
						</models>
					</action>
					<action type="updateRow" fieldmodel="ImageSave_Account" affectedrows="context">
						<updates>
							<update valuesource="fieldvalue" field="Image__c" fieldtargetobjects="skuid__Image__c" enclosevalueinquotes="true" value="{{Id}}"/>
						</updates>
					</action>
					<action type="save">
						<models>
							<model>ImageSave_Account</model>
						</models>
					</action>
					<action type="adoptRows" sourcemodel="ImageSave_Account" targetmodel="Accounts" affectedrows="context"/>
					<action type="unblockUI"/>
					<action type="closeModals" closebehavior="close"/>
				</actions>
				<description/>
			</actionsequence>
		</actionsequences>
	</resources>
	<styles>
		<styleitem type="background" bgtype="none"/>
	</styles>
	<pageregioncontents>
		<pageregioncontent uniqueid="__header">
			<components>
				<skuid__layoutRegion sticky="true">
					<components>
						<skuid__text contents="Generate AI Images from CRM Data prompts" uniqueid="sk-2pv--22466" styleSettingsVariant="increased">
							<styles>
								<spacing top="2" right="2" bottom="2" left="2"/>
							</styles>
						</skuid__text>
					</components>
					<styles>
						<spacing/>
					</styles>
					<background type="color" color="#dbe5f1"/>
				</skuid__layoutRegion>
			</components>
		</pageregioncontent>
	</pageregioncontents>
	<background type="color" color="#f2f2f2"/>
</skuid__page>